# 优化报告

观察到对于每个点的计算都是相对独立的，可以多线程。

具体地，我使用了 8 个线程，把 height 行平均分给这 8 个线程计算。因为不存在资源抢占，所以也不需要加锁。跑出来运行速度大约是原来的 3.5 倍。

优化后：

```
Trial        Time, ms 
    1          53.056 
    2          52.528 
    3          52.705 
    4          52.477 
    5          52.650 
    6          55.076 
    7          52.328 
    8          52.614 
    9          53.538 
   10          54.491 
-----------------------------------------------------
Total :      531.5 ms
-----------------------------------------------------
```

优化前：

```
Trial        Time, ms 
    1         187.044 
    2         188.819 
    3         189.301 
    4         189.280 
    5         188.695 
    6         187.086 
    7         187.857 
    8         186.399 
    9         186.815 
   10         187.618 
-----------------------------------------------------
Total :     1878.9 ms
-----------------------------------------------------
```

回忆了一下 perflab 的东西，加了个分块，成了负优化了（）脑补了一下，感觉这个分块没加好，注释掉了。如果有时间，可能会试一试 simd 指令集。